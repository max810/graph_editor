(this.webpackJsonpgraph_editor=this.webpackJsonpgraph_editor||[]).push([[0],{108:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),c=a.n(r),l=(a(77),a(28)),i=a(18),s=a(37),d=a(38),u=a(41),m=a(23),p=a(15),y=a(63),b=a(64),f=a(48),g=a(65),h=a.n(g),k=a(10),j="GET_NODE_TYPES",O={nodeTypes:{}},v=Object(p.combineReducers)({nodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case j:return Object(k.a)({},e,{nodeTypes:n});default:return e}}}),D={key:"User",storage:h.a,whitelist:["User"]},N=Object(f.a)(D,v),w=Object(p.createStore)(N,Object(b.composeWithDevTools)(Object(p.applyMiddleware)(y.a))),C=(Object(f.b)(w),w),A=a(8),E=a(19),x=a(9),S=a(47),T=a(134),B=a(142),I=a(139),K=a(67),G=a.n(K),P=(a(88),a(32)),L=a.n(P),M=a(68),W=a.n(M),_=function(){var e;return L.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.awrap(W.a.get("https://nnio-project.herokuapp.com/admin/layers_schemas"));case 2:return e=t.sent,console.log(e),t.abrupt("return",e);case 5:case"end":return t.stop()}}))},H=Object(T.a)((function(){return{drawerPaper:{width:180}}})),J=Object(m.b)((function(e){return{nodeTypes:e.nodes.nodeTypes}}))((function(e){var t=H(),a=["#88dee3","#ffcf99","#82ab79","#ab93ad"],n=e.addNode,r=e.nodeTypes;return o.a.createElement(B.a,{variant:"permanent",anchor:"left",classes:{paper:t.drawerPaper}},r&&Object.keys(r).length&&Object.keys(r).map((function(e,t){return o.a.createElement(I.a,{key:G()(),onClick:function(){return n(e,a[t])}},e)})))})),R=a(42),U=a(143),F=a(141),V=a(140),Y=Object(T.a)((function(){return{drawerPaper:{width:180,padding:10}}})),$=function(e){var t=Y(),a=e.node,r=e.onClose,c=e.onSubmit,l=Object(n.useState)(""),i=Object(R.a)(l,2),s=i[0],d=i[1],u=function(){return function(e){"keydown"===e.type&&"Escape"===e.key&&r()}};return o.a.createElement("div",null,o.a.createElement(B.a,{anchor:"right",open:!!a,onClose:u()},o.a.createElement("div",{className:t.list,role:"presentation",onClick:u(),onKeyDown:u()},o.a.createElement(U.a,null,o.a.createElement(F.a,{htmlFor:"my-input"},"New node name"),o.a.createElement(V.a,{id:"my-input",onChange:function(e){return d(e.target.value)},value:s}),o.a.createElement(I.a,{onClick:function(){return c(s)}},"Change name")))))};a(108),a(138),a(137),a(111),Object(T.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).nodeId=0,a.state={open:!1,contextNode:"",selectedNode:"",selectedNodeKeys:[],model:{nodeDataArray:[{key:"Alpha",label:"Alpha",color:"lightblue"},{key:"Beta",label:"Beta",color:"orange"},{key:"Gamma",label:"Gamma",color:"lightgreen"},{key:"Delta",label:"Delta",color:"pink"},{key:"Omega",label:"Omega",color:"grey"}],linkDataArray:[{from:"Alpha",to:"Beta"},{from:"Alpha",to:"Gamma"},{from:"Beta",to:"Delta"},{from:"Gamma",to:"Omega"}]}},a.onEditPanelClose=function(){a.setState(Object(k.a)({},a.state,{contextNode:""}))},a.onNameChange=function(e){var t=a.state.model.nodeDataArray.map((function(t){return t.key===a.state.contextNode.key&&(t.label=e,console.log(t)),t}));console.log(t),a.setState(Object(k.a)({},a.state,{model:Object(k.a)({},a.state.model,{nodeDataArray:t})})),a.modelChangeHandler({eventType:""}),a.onEditPanelClose()},a.createDiagram=function(e){var t=x.GraphObject.make,n=t(x.Diagram,e,{initialContentAlignment:x.Spot.Center,"undoManager.isEnabled":!0});n.nodeTemplate=t(x.Node,"Vertical",new x.Binding("location","loc"),t(x.Shape,"Circle",{strokeWidth:0},new x.Binding("fill","color")),t(x.TextBlock,{position:"relative"},new x.Binding("text","key")),t(x.TextBlock,{margin:8},new x.Binding("text","label")));var o=Object(E.a)(a);return n.addDiagramListener("ObjectSingleClicked",(function(e){var t=e.subject.part;if(!(t instanceof x.Link))if(1===e.diagram.selection.count)o.setState({selectedNode:t.data.key});else if(2===e.diagram.selection.count&&o.state.selectedNode){var a;console.log(o.state.model.linkDataArray),o.state.model.linkDataArray.map((function(e){console.log(e.to),console.log(t.data.key),e.to!==t.data.key||(a=!0)})),a?o.setState(Object(k.a)({},o.state,{model:Object(k.a)({},o.state.model,{linkDataArray:[].concat(Object(A.a)(o.state.model.linkDataArray),[{from:o.state.selectedNode,to:t.data.key}])})})):alert("Can not connect")}})),n.addDiagramListener("ObjectContextClicked",(function(e){var t=e.subject.part;t instanceof x.Link||o.setState(Object(k.a)({},o.state,{contextNode:t.data}),(function(){console.log(o.state.contextNode)}))})),n},a.removeNode=function(e){var t=a.state.model.nodeDataArray.findIndex((function(t){return t.key===e}));-1!==t&&a.setState(Object(k.a)({},a.state,{model:Object(k.a)({},a.state.model,{nodeDataArray:[].concat(Object(A.a)(a.state.model.nodeDataArray.slice(0,t)),Object(A.a)(a.state.model.nodeDataArray.slice(t+1)))})}))},a.removeLink=function(e){var t=a.state.model.linkDataArray.findIndex((function(t){return t.from===e.from&&t.to===e.to}));if(-1!==t)return Object(k.a)({},a.state,{model:Object(k.a)({},a.state.model,{linkDataArray:[].concat(Object(A.a)(a.state.model.linkDataArray.slice(0,t)),Object(A.a)(a.state.model.linkDataArray.slice(t+1)))})})},a.nodeSelectionHandler=function(e,t){if(t)a.setState(Object(k.a)({},a.state,{selectedNodeKeys:[].concat(Object(A.a)(a.state.selectedNodeKeys),[e])}));else{var n=a.state.selectedNodeKeys.findIndex((function(t){return t===e}));if(-1===n)return;a.setState(Object(k.a)({},a.state,{selectedNodeKeys:[].concat(Object(A.a)(a.state.selectedNodeKeys.slice(0,n)),Object(A.a)(a.state.selectedNodeKeys.slice(n+1)))}))}},a.addNode=function(e,t){var n="node"+a.nodeId,o=a.state.selectedNodeKeys.map((function(e){return{from:e,to:n}}));a.setState(Object(k.a)({},a.state,{model:Object(k.a)({},a.state.model,{nodeDataArray:[].concat(Object(A.a)(a.state.model.nodeDataArray),[{key:n,label:e||"New Node",color:t||"Blue"}]),linkDataArray:o.length>0?Object(A.a)(a.state.model.linkDataArray).concat(o):Object(A.a)(a.state.model.linkDataArray)})})),a.nodeId+=1},a.modelChangeHandler=function(e){switch(e.eventType){case S.ModelChangeEventType.Remove:e.nodeData&&a.removeNode(e.nodeData.key),e.linkData&&a.removeLink(e.linkData)}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.getNodeTypes()}},{key:"handleModal",value:function(e){this.setState({open:e.contextNode.label})}},{key:"render",value:function(){return o.a.createElement("section",null,o.a.createElement(J,{addNode:this.addNode}),o.a.createElement(S.GojsDiagram,{key:"gojsDiagram",diagramId:"myDiagramDiv",model:this.state.model,className:"myDiagram",createDiagram:this.createDiagram,onModelChange:this.modelChangeHandler}),o.a.createElement($,{node:this.state.contextNode,onClose:this.onEditPanelClose,onSubmit:this.onNameChange}))}}]),t}(o.a.Component),z={getNodeTypes:function(){return function(e){var t,a,n;return L.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,L.a.awrap(_());case 3:a=o.sent,n=a.data,t=n,o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.log(o.t0);case 11:e({type:j,payload:t});case 12:case"end":return o.stop()}}),null,null,[[0,8]])}}},Q=Object(m.b)(null,z)(q),X=(a(109),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(m.a,{store:C},o.a.createElement("div",null,o.a.createElement(Q,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(X,null),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,a){e.exports=a(110)},77:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.7a66df3c.chunk.js.map